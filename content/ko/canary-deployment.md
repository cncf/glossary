---
title: 카나리 배포 (Canary Deployment)
status: Completed
category: 개념
tags: ["방법론", "애플리케이션", ""]
---

## 개념

카나리 배포는 다음과 같은 두 가지 환경을 바탕으로 시작하는 배포 전략이다. 
하나는 실시간 트래픽이 있는 환경이고, 다른 하나는 실시간 트래픽이 없는 업데이트된 코드가 포함되어 있는 환경이다.

트래픽은 애플리케이션의 기존 버전에서 업데이트된 버전으로 점진적으로 이동된다.
실시간 트래픽의 1%를 이동하는 것에서 시작하여 10%, 25% 등을 점차 이동할 수 있으며, 모든 트래픽이 업데이트된 버전을 통해 실행될 때까지 이동한다.
이를 통해, 조직은 개발 환경에서 새 버전의 소프트웨어를 테스트하고 피드백을 받을 수 있으며, 
오류를 진단하고, 필요한 경우 안정된 버전으로 신속하게 롤백할 수 있다.

"카나리"는 광부들을 보호하기 위해 카나리아 새를 탄광으로 데려가는 "탄광 속의 카나리아" 관행과 관련이 있다.
인간이 느끼지 못하는 무취의 유해 가스가 있다면 카나리아는 죽게될 것이고, 이를 통해 광부들이 빠르게 대피해야 함을 알 수 있었다.
마찬가지로, 업데이트된 코드에 문제가 발생하면, 실시간 트래픽을 기존버전으로 "대피"시킨다.

## 다루는 문제

테스트 전략이 아무리 철저하더라도, 프로덕션 환경에서는 항상 몇 가지 버그가 발견된다.
따라서, 앱의 한 버전에서 다른 버전으로 한번에 모든 트래픽을 이동하는 것은 더 심각한 오류를 발생시킬 수 있다.

## 문제 해결 방식

조직은 카나리 배포를 통해 주요 트래픽을 새로운 버전으로 이동하기 전에 실제 시나리오에서 새 소프트웨어가 어떻게 동작하는지 확인할 수 있다.  
이 전략을 통해 조직은 중단 시간을 최소화 할 수 있고, 새 배포에 문제가 있는 경우 신속하게 롤백(rollback)할 수 있다.
또한, 전반적인 사용자 경험에 큰 영향을 주지 않으면서 보다 심층적인 프로덕션 애플리케이션 테스트를 수행할 수 있다.