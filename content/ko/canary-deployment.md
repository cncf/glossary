---
title: 카나리 배포 (Canary Deployment)
status: Completed
category: 개념
tags: ["방법론", "애플리케이션", ""]
---

## 개념

카나리 또는 카나리아 배포는 라이브 트래픽을 보유하고있는 환경과,
새롭게 업데이트된 코드를 포함하여 라이브 트래픽을 보유하지 않은 두 개의 환경으로 시작하는 배포 전략이다.

트래픽은 애플리케이션의 기존 버전에서 업데이트된 버전으로 점진적으로 이동된다.
처음에는 1%의 라이브 트래픽으로 시작하여, 10%, 25%로 진행되며 결국 모든 트래픽이 업데이트된 버전으로 이동한다.
이를 통해, 조직은 개발 환경에서 새 버전의 소프트웨어를 테스트하고 피드백을 받을 수 있으며, 
오류를 진단하고, 필요한 경우 안정된 버전으로 신속하게 롤백할 수 있다.

"카나리아"라는 단어는 광부들을 보호하기 위해 카나리아새를 탄광으로 데려가는 "탄광 속의 카나리아"관행을 의미한다.
인간이 느끼지 못하는 무취의 유해 가스가 있다면 카나리아는 죽게될 것이고, 이를 본 광부들을 빨리 "대피해야 한다"는 것을 알 수 있었다.
마찬가지로, 업데이트된 코드에 문제가 발생하면, 라이브 트래픽은 기존버전으로 "대피"한다.

## 다루는 문제

테스트 전략이 아무리 철저하더라도, 제품에서 버그는 항상 발견된다.
따라서, 앱의 한 버전에서 다른 버전으로 트래픽을 한번에 모두 이동하는 것은 더 심각한 오류를 발생시킬 수 있다.

## 문제 해결 방식

조직은 카나리 배포를 통해 중요한 트래픽을 새로운 버전으로 이동하기 전에 실제 환경 시나리오에서 새 소프트웨어가 어떻게 작동하는지 확인할 수 있다.   
이 전략을 통해 조직은 작동 중단 시간을 최소화 할 수 있고, 새 배포에 문제가 있는 경우 신속하게 롤백(rollback)할 수 있다.
또한, 전반적인 사용자 경험에 큰 영향을 미치지 않으면서, 보다 심층적인 제품 테스트를 수행할 수 있다.